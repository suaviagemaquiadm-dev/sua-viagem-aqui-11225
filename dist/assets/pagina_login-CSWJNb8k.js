import"./modulepreload-polyfill-B5Qt9EMX.js";import{m as L,b as i,G as p,n as w,p as B}from"./main-DHtEt640.js";import"./layout-Bzk_Fs54.js";const a=document.getElementById("login-form"),r=document.getElementById("submit-btn"),c=document.getElementById("google-login-btn"),l=document.getElementById("forgot-password-btn"),f=document.getElementById("reset-password-modal"),m=document.getElementById("close-reset-modal-btn"),o=document.getElementById("reset-password-form"),u=document.getElementById("send-reset-link-btn"),h=document.getElementById("alert-modal"),I=document.getElementById("alert-message"),g=document.getElementById("alert-close-btn");function d(t,e){const n=t.querySelector(".submit-text"),s=t.querySelector(".submit-loading");t.disabled=e,e?(n.classList.add("hidden"),s.classList.remove("hidden")):(n.classList.remove("hidden"),s.classList.add("hidden"))}function v(t){I.textContent=t,h.classList.remove("hidden")}function E(t){const e=new URLSearchParams(window.location.search).get("redirect")||"/perfil.html";window.location.assign(e)}function y(t){console.error("Authentication Error:",t.code,t.message);let e="Ocorreu um erro ao tentar fazer login.";switch(t.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":e="E-mail ou senha inválidos. Verifique seus dados e tente novamente.";break;case"auth/too-many-requests":e="Acesso temporariamente bloqueado devido a muitas tentativas. Tente novamente mais tarde.";break;case"auth/popup-closed-by-user":e="A janela de login com o Google foi fechada. Tente novamente.";break}v(e)}async function b(t){t.preventDefault(),d(r,!0);const e=a.email.value,n=a.password.value;try{const s=await L(i,e,n);E(s.user)}catch(s){y(s)}finally{d(r,!1)}}async function P(){const t=new p;try{const e=await w(i,t);E(e.user)}catch(e){y(e)}}async function k(t){t.preventDefault(),d(u,!0);const e=document.getElementById("reset-email").value;try{await B(i,e),document.getElementById("reset-instructions").classList.add("hidden"),o.classList.add("hidden");const n=document.getElementById("reset-confirmation");n.textContent="Um e-mail de recuperação foi enviado para você. Verifique sua caixa de entrada e spam.",n.classList.remove("hidden")}catch(n){console.error("Password Reset Error:",n),v("Não foi possível enviar o e-mail de recuperação. Verifique o endereço digitado.")}finally{d(u,!1)}}function A(){f.classList.remove("hidden")}function M(){f.classList.add("hidden"),document.getElementById("reset-instructions").classList.remove("hidden"),o.classList.remove("hidden"),document.getElementById("reset-confirmation").classList.add("hidden"),o.reset()}function R(){h.classList.add("hidden")}document.addEventListener("DOMContentLoaded",()=>{a&&a.addEventListener("submit",b),c&&c.addEventListener("click",P),l&&l.addEventListener("click",A),m&&m.addEventListener("click",M),o&&o.addEventListener("submit",k),g&&g.addEventListener("click",R)});
