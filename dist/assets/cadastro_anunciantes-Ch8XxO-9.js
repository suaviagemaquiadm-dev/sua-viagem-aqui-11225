import"./modulepreload-polyfill-B5Qt9EMX.js";import{B as f,b as y,d as h,a as b,D as E,C as I}from"./main-DHtEt640.js";import"./layout-Bzk_Fs54.js";const C=document.getElementById("form-container"),v=document.getElementById("success-container"),u=document.getElementById("partner-form"),c=document.getElementById("category"),r=document.getElementById("form-message"),w=document.getElementById("submit-btn"),d=document.getElementById("submit-text"),m=document.getElementById("submit-loading"),B=document.getElementById("control-code-display"),L=document.getElementById("payment-container"),x=document.getElementById("password"),P=document.getElementById("confirm-password"),M={agencias:"Agências de Viagens",aluguel:"Aluguel de Carros/Motos",bares:"Bares e Vida Noturna",camping:"Camping",ecoturismo:"Ecoturismo e Aventura",experiencias:"Experiências Culturais",familia:"Viagens em Família",fotografos:"Fotógrafos de Viagem",guias:"Guias de Turismo",hospedagem:"Hotéis e Pousadas",mergulho:"Mergulho",passeios_barco:"Passeios de Barco / Lancha",pet_friendly:"Pet Friendly",restaurantes:"Restaurantes",transfer:"Transfer e Receptivo",turismo_rural:"Turismo Rural"},A={free:{name:"Plano Gratuito",price:0},basic:{name:"Plano Basic",price:99},plus:{name:"Plano Plus",price:199},advance:{name:"Plano Advance",price:399}};function T(){c.innerHTML='<option value="" disabled selected>Selecione uma categoria</option>';for(const[t,n]of Object.entries(M)){const e=document.createElement("option");e.value=t,e.textContent=n,c.appendChild(e)}}function D(){typeof IMask<"u"&&(IMask(document.getElementById("cnpj"),{mask:"00.000.000/0000-00"}),IMask(document.getElementById("whatsapp"),{mask:"(00) 00000-0000"}))}function l(t,n=!0){r.textContent=t,r.className=`text-center p-3 rounded-md mt-6 text-sm ${n?"bg-red-500/20 text-red-300":"bg-green-500/20 text-green-300"}`,r.classList.remove("hidden")}function i(t){w.disabled=t,t?(d.classList.add("hidden"),m.classList.remove("hidden")):(d.classList.remove("hidden"),m.classList.add("hidden"))}async function k(t){if(t.preventDefault(),i(!0),r.classList.add("hidden"),x.value!==P.value){l("As senhas não coincidem."),i(!1);return}const n=new FormData(u),e=Object.fromEntries(n.entries());try{const a=(await f(y,e.email,e.password)).user,p=h(b,"partners",a.uid),g={ownerUid:a.uid,businessName:e.businessName,ownerName:e.ownerName,cnpj:e.cnpj,phone:e.whatsapp,email:e.email,city:e.city,state:e.state.toUpperCase(),category:e.category,plan:e.plan,image:e.image||"",status:e.plan==="free"?"pendente":"aguardando_pagamento",createdAt:E(),rating:null,reviewCount:0};await I(p,g),C.classList.add("hidden"),v.classList.remove("hidden"),B.textContent=a.uid.substring(0,8).toUpperCase();const o=A[e.plan];o&&o.price>0&&(console.log(`Creating payment preference for plan ${o.name} with price ${o.price}`),L.classList.remove("hidden"),document.getElementById("wallet_container").innerHTML='<p class="text-amber-300">Integração de pagamento pendente.</p><p class="text-slate-400">O botão do Mercado Pago aparecerá aqui.</p>')}catch(s){console.error("Error creating partner:",s);let a="Ocorreu um erro. Tente novamente.";s.code==="auth/email-already-in-use"?a="Este e-mail já está cadastrado. Tente fazer login.":s.code==="auth/weak-password"&&(a="A senha é muito fraca. Use pelo menos 6 caracteres."),l(a)}finally{i(!1)}}document.addEventListener("DOMContentLoaded",()=>{T(),D(),u.addEventListener("submit",k)});
