import"./modulepreload-polyfill-B5Qt9EMX.js";import{o as m,b as d,d as o,a as s,g as r,k as u,l as g}from"./main-DHtEt640.js";import"./layout-Bzk_Fs54.js";let l=null;m(d,async t=>{const e=document.getElementById("loading-state"),a=document.getElementById("auth-error"),n=document.getElementById("dashboard-content");if(t){l=t;try{await y(t.uid),e.classList.add("hidden"),n.classList.remove("hidden")}catch(i){console.error(i),e.classList.add("hidden"),a.classList.remove("hidden")}}else e.classList.add("hidden"),a.classList.remove("hidden")});async function y(t){const e=o(s,"partners",t),a=await r(e);if(a.exists()){const n=a.data();document.getElementById("welcome-msg").innerText=`Olá, ${n.businessName}`,document.getElementById("plan-display").innerText=n.plan||"Free",document.getElementById("public-link").href=`public_partner_details.html?id=${t}`,document.getElementById("businessName").value=n.businessName||"",document.getElementById("phone").value=n.phone||"",document.getElementById("city").value=n.city||"",document.getElementById("state").value=n.state||"",document.getElementById("description").value=n.description||"",document.getElementById("imageUrl").value=n.image||""}else throw new Error("Perfil de parceiro não encontrado.")}window.switchTab=t=>{document.querySelectorAll(".sidebar-link").forEach(e=>e.classList.remove("active")),document.getElementById(`nav-${t}`).classList.add("active"),document.querySelectorAll("#dashboard-content > div").forEach(e=>e.classList.add("hidden")),document.getElementById(`tab-${t}`).classList.remove("hidden")};document.getElementById("profile-form").addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("save-btn"),a=e.innerText;e.disabled=!0,e.innerText="Salvando...";try{await u(o(s,"partners",l.uid),{businessName:document.getElementById("businessName").value,phone:document.getElementById("phone").value,city:document.getElementById("city").value,state:document.getElementById("state").value.toUpperCase(),description:document.getElementById("description").value,image:document.getElementById("imageUrl").value,updatedAt:new Date().toISOString()}),E(),document.getElementById("welcome-msg").innerText=`Olá, ${document.getElementById("businessName").value}`}catch(n){console.error(n),alert("Erro ao salvar: "+n.message)}finally{e.disabled=!1,e.innerText=a}});function E(){const t=document.getElementById("toast");t.classList.remove("translate-y-20"),setTimeout(()=>t.classList.add("translate-y-20"),3e3)}const c=()=>g(d).then(()=>window.location.href="index.html");document.getElementById("logout-btn").onclick=c;document.getElementById("logout-btn-mobile").onclick=c;
