import"./modulepreload-polyfill-B5Qt9EMX.js";import{d as E,a as f,g as B,o as I,b as v,c as M,q as C,e as H,w as S,f as T,h as $,i as D}from"./main-DHtEt640.js";import"./layout-Bzk_Fs54.js";document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("loading-container"),h=document.getElementById("error-container"),p=document.getElementById("profile-content");let r=null,a=null;async function u(){if(a=new URLSearchParams(window.location.search).get("id"),!a){d();return}try{const t=E(f,"users",a),s=await B(t);if(s.exists()){const e=s.data();document.title=`Perfil de ${e.name} - Sua Viagem Aqui`,document.getElementById("user-name").textContent=e.name,document.getElementById("profile-picture").src=e.photoURL||"https://placehold.co/128x128/1f2937/fcd34d?text=SVA",document.getElementById("followers-count").innerHTML=`<strong>${(e.followers||[]).length}</strong> Seguidores`,document.getElementById("following-count").innerHTML=`<strong>${(e.following||[]).length}</strong> Seguindo`,x(e.badges||{}),w(e.interests||[]),await y(a),I(v,o=>{r=o?o.uid:null,b(e)}),m.classList.add("hidden"),p.classList.remove("hidden")}else d()}catch(t){console.error("Erro ao carregar perfil p√∫blico:",t),d()}}function b(n){const t=document.getElementById("follow-button-container");if(!r||r===a){t.innerHTML="";return}const s=(n.followers||[]).includes(r),e=document.createElement("button");e.id="follow-btn",e.className=`font-bold py-2 px-6 rounded-lg transition-colors ${s?"bg-slate-600 hover:bg-slate-700 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,e.innerHTML=s?'<i class="fas fa-check mr-2"></i> Seguindo':'<i class="fas fa-user-plus mr-2"></i> Seguir',e.addEventListener("click",async()=>{e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i>';const o=$(D,"toggleFollowUser");try{await o({targetUserId:a}),u()}catch(i){console.error("Erro ao seguir/deixar de seguir:",i),e.disabled=!1,e.innerHTML=s?'<i class="fas fa-check mr-2"></i> Seguindo':'<i class="fas fa-user-plus mr-2"></i> Seguir'}}),t.innerHTML="",t.appendChild(e)}function x(n){const t=document.getElementById("badges-grid"),s=document.getElementById("no-badges-message");if(t.innerHTML="",!n||Object.keys(n).length===0){s.classList.remove("hidden");return}s.classList.add("hidden");for(const e in n){const o=n[e],i=L(o);t.appendChild(i)}}function w(n){const t=document.getElementById("interests-list"),s=document.getElementById("no-interests-message");if(t.innerHTML="",!n||n.length===0){s.classList.remove("hidden"),t.appendChild(s);return}s.classList.add("hidden"),n.forEach(e=>{const o=document.createElement("span");o.className="tag-item",o.textContent=e,t.appendChild(o)})}async function y(n){const t=document.getElementById("itineraries-grid"),s=document.getElementById("no-itineraries-message");t.innerHTML="",s.classList.add("hidden");const e=M(f,"users",n,"itineraries"),o=C(e,S("public","==",!0),H("createdAt","desc")),i=await T(o);i.empty?s.classList.remove("hidden"):i.forEach(g=>{const c={id:g.id,...g.data()},l=document.createElement("a");l.href=`roteiro_publico.html?user=${n}&id=${c.id}`,l.className="glass-effect rounded-2xl p-6 flex flex-col justify-between card-hover",l.innerHTML=`<div><h3 class="text-xl font-bold text-white truncate">${c.title}</h3><p class="text-sm text-slate-300 mt-4 line-clamp-3">${c.prompt}</p></div><div class="text-right text-amber-400 font-semibold mt-4">Ver Roteiro <i class="fas fa-arrow-right ml-2"></i></div>`,t.appendChild(l)})}function L(n){var s;const t=document.createElement("div");return t.className="bg-slate-800 p-4 rounded-lg border border-slate-700 flex flex-col items-center justify-center text-center",t.innerHTML=`
            <i class="${n.icon} text-4xl text-amber-400 mb-3"></i>
            <h4 class="font-bold text-white text-lg">${n.name}</h4>
            <p class="text-sm text-slate-400 mt-1">${n.description}</p>
            <p class="text-xs text-slate-500 mt-2">Conquistado em: ${new Date((s=n.awardedAt)==null?void 0:s.toDate()).toLocaleDateString("pt-BR")}</p>
        `,t}function d(){m.classList.add("hidden"),h.classList.remove("hidden")}u()});
